<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>í˜„ì¬ì˜ í™ˆíŠ¸ë ˆì´ë‹</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <style>
      body {
        font-family: "Inter", sans-serif;
      }
      .workout-card {
        transition: transform 0.3s ease, box-shadow 0.3s ease;
        cursor: pointer;
      }
      .workout-card.active {
        transform: translateY(-10px) scale(1.03);
        box-shadow: 0 20px 25px -5px rgb(0 0 0 / 0.1),
          0 8px 10px -6px rgb(0 0 0 / 0.1);
        border-color: #3b82f6;
      }
      .timer-display {
        font-size: 4rem;
        line-height: 1;
      }
      .btn {
        transition: all 0.2s ease;
      }
      .btn:hover {
        transform: translateY(-2px);
      }
      .btn:active {
        transform: translateY(0);
      }
      /* Modal styles */
      .modal {
        transition: opacity 0.3s ease;
      }
      #modal-description ol {
        text-align: left;
        margin-left: 1.5rem;
        list-style-type: decimal;
      }
      #modal-description li {
        margin-bottom: 0.5rem;
      }
    </style>
  </head>
  <body class="bg-slate-50 text-slate-800">
    <div class="container mx-auto p-4 md:p-8 max-w-4xl">
      <!-- Header -->
      <header class="text-center mb-8">
        <h1 class="text-4xl md:text-5xl font-bold text-slate-900 mb-2">
          ğŸ”¥ í˜„ì¬ì˜ í™ˆíŠ¸ë ˆì´ë‹
        </h1>
        <p class="text-lg text-slate-600">
          ì˜¤ëŠ˜ì˜ ë§¨ëª¸ ìš´ë™ ë£¨í‹´ì„ ì‹œì‘í•˜ê³  ê±´ê°•í•œ ë³€í™”ë¥¼ ë§Œë“¤ì–´ë³´ì„¸ìš”!
        </p>
      </header>

      <!-- Main Control Panel -->
      <div
        id="control-panel"
        class="bg-white rounded-2xl shadow-lg p-6 mb-8 sticky top-4 z-10"
      >
        <div
          class="flex flex-col md:flex-row items-center justify-between gap-4"
        >
          <div class="text-center md:text-left">
            <h2
              id="current-exercise-title"
              class="text-2xl font-bold text-blue-600"
            >
              ìš´ë™ì„ ì‹œì‘í•´ë³¼ê¹Œìš”?
            </h2>
            <p id="current-set-info" class="text-slate-500">
              ì´ 3ì„¸íŠ¸ ì¤‘ 1ì„¸íŠ¸ ì¤€ë¹„
            </p>
          </div>
          <div id="timer-container" class="hidden text-center">
            <div
              id="timer-display"
              class="timer-display font-bold text-slate-800"
            >
              00:00
            </div>
          </div>
          <div class="flex items-center gap-2">
            <button
              id="start-btn"
              class="btn bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-6 rounded-lg shadow-md"
            >
              ìš´ë™ ì‹œì‘
            </button>
            <button
              id="next-btn"
              class="btn bg-slate-700 hover:bg-slate-800 text-white font-bold py-3 px-6 rounded-lg shadow-md hidden"
            >
              ë‹¤ìŒ ìš´ë™
            </button>
          </div>
        </div>
        <div
          id="completion-message"
          class="hidden mt-4 p-4 bg-green-100 text-green-800 rounded-lg text-center"
        >
          <p class="font-bold text-lg">
            ğŸ‰ ì •ë§ ëŒ€ë‹¨í•´ìš”! ì˜¤ëŠ˜ì˜ ìš´ë™ì„ ëª¨ë‘ ì™„ë£Œí–ˆìŠµë‹ˆë‹¤!
          </p>
          <p>ê¾¸ì¤€í•¨ì´ ê°€ì¥ ì¤‘ìš”í•©ë‹ˆë‹¤. ë‚´ì¼ë„ í™”ì´íŒ…!</p>
        </div>
      </div>

      <!-- Workout Routine List -->
      <div id="routine-list" class="space-y-6">
        <!-- ìš´ë™ í•­ëª©ë“¤ì´ ì—¬ê¸°ì— ë™ì ìœ¼ë¡œ ì¶”ê°€ë©ë‹ˆë‹¤ -->
      </div>
    </div>

    <!-- ìƒì„¸ ì„¤ëª… Modal -->
    <div
      id="exercise-modal"
      class="modal fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center p-4 z-50 opacity-0 pointer-events-none"
    >
      <div
        class="bg-white rounded-2xl shadow-xl max-w-md w-full p-6 text-center transform scale-95 transition-transform max-h-[90vh] overflow-y-auto"
      >
        <h3
          id="modal-title"
          class="text-2xl font-bold mb-4 text-slate-800"
        ></h3>
        <div id="modal-description" class="text-slate-600 mb-6"></div>
        <button
          id="modal-close-btn"
          class="btn w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-6 rounded-lg"
        >
          ë‹«ê¸°
        </button>
      </div>
    </div>

    <script>
      // --- ìš´ë™ ë°ì´í„° ì •ì˜ (í‘¸ì‹œì—… ê°•í™” í”„ë¡œê·¸ë¨ - ìš”ê°€ë§¤íŠ¸ ë²„ì „ìœ¼ë¡œ ë³€ê²½) ---
      let routine = [
        {
          id: "warmup-1",
          name: "ì¤€ë¹„ìš´ë™: ê³ ì–‘ì´-ì†Œ ìì„¸",
          type: "reps",
          count: "10íšŒ",
          description:
            "<ol><li>ë„¤ ë°œ ê¸°ê¸° ìì„¸ë¥¼ ë§Œë“­ë‹ˆë‹¤. (ì–´ê¹¨ ì•„ë˜ ì†ëª©, ê³¨ë°˜ ì•„ë˜ ë¬´ë¦)</li><li>ìˆ¨ì„ ë“¤ì´ë§ˆì‹œë©° í—ˆë¦¬ë¥¼ ì˜¤ëª©í•˜ê²Œ ë§Œë“¤ê³ , ì‹œì„ ì€ ì²œì¥ì„ í–¥í•©ë‹ˆë‹¤. (ì†Œ ìì„¸)</li><li>ìˆ¨ì„ ë‚´ì‰¬ë©´ì„œ ë“±ì„ ë™ê·¸ë—ê²Œ ë§ì•„ ì˜¬ë¦¬ê³ , ì‹œì„ ì€ ë°°ê¼½ì„ í–¥í•©ë‹ˆë‹¤. (ê³ ì–‘ì´ ìì„¸)</li><li>ì´ ë‘ ë™ì‘ì„ ë¶€ë“œëŸ½ê²Œ ë°˜ë³µí•˜ë©° ì²™ì¶”ë¥¼ í’€ì–´ì¤ë‹ˆë‹¤.</li></ol>",
        },
        {
          id: "warmup-2",
          name: "ì¤€ë¹„ìš´ë™: ë ˆê·¸ ìŠ¤ìœ™",
          type: "reps",
          count: "ì¢Œ/ìš° ê° 10íšŒ",
          description:
            "<ol><li>ë²½ì´ë‚˜ ì˜ìë¥¼ ì¡ê³  ê· í˜•ì„ ì¡ìŠµë‹ˆë‹¤.</li><li>í•œìª½ ë‹¤ë¦¬ë¥¼ ì•ë’¤ë¡œ ê·¸ë„¤ì²˜ëŸ¼ ë¶€ë“œëŸ½ê²Œ í”ë“¤ì–´ì¤ë‹ˆë‹¤.</li><li>ì ì  ë²”ìœ„ë¥¼ ë„“í˜€ ê³ ê´€ì ˆì´ í’€ë¦¬ëŠ” ê²ƒì„ ëŠë‚ë‹ˆë‹¤.</li><li>ë°˜ëŒ€ìª½ ë‹¤ë¦¬ë„ ë˜‘ê°™ì´ ë°˜ë³µí•©ë‹ˆë‹¤.</li></ol>",
        },
        {
          id: "warmup-3",
          name: "ì¤€ë¹„ìš´ë™: ëª¸í†µ ë¹„í‹€ê¸°",
          type: "reps",
          count: "20íšŒ",
          description:
            "<ol><li>ë‹¤ë¦¬ë¥¼ ì–´ê¹¨ë„ˆë¹„ë¡œ ë²Œë¦¬ê³  í¸ì•ˆí•˜ê²Œ ì„­ë‹ˆë‹¤.</li><li>ì–‘íŒ”ì— í˜ì„ ë¹¼ê³ , ëª¸í†µì„ ì¢Œìš°ë¡œ ë¶€ë“œëŸ½ê²Œ íšŒì „ì‹œí‚µë‹ˆë‹¤.</li><li>íŒ”ì´ ëª¸í†µì„ ìì—°ìŠ¤ëŸ½ê²Œ ê°ì‹¸ë„ë¡ ì›€ì§ì´ë©° ì½”ì–´ë¥¼ ì˜ˆì—´í•©ë‹ˆë‹¤.</li></ol>",
        },
        {
          id: "warmup-4",
          name: "ì¤€ë¹„ìš´ë™: ì œìë¦¬ ë›°ê¸°",
          type: "time",
          count: 60,
          description:
            "<ol><li>ê°€ë³ê²Œ ì œìë¦¬ì—ì„œ ë‹¬ë¦¬ê¸°ë¥¼ ì‹œì‘í•©ë‹ˆë‹¤.</li><li>ëª¸ì— ì—´ì´ ë‚˜ê³  ì‹¬ë°•ìˆ˜ê°€ ì„œì„œíˆ ì˜¤ë¥´ëŠ” ê²ƒì„ ëŠë‚ë‹ˆë‹¤.</li></ol>",
        },
        {
          id: "main-1",
          name: "í…œí¬ ìŠ¤ì¿¼íŠ¸",
          type: "reps",
          count: "20íšŒ",
          description:
            "<ol><li>ë°œì„ ì–´ê¹¨ë„ˆë¹„ë¡œ ë²Œë¦¬ê³  ì„­ë‹ˆë‹¤.</li><li>(í•˜ë‚˜, ë‘˜, ì…‹) 3ì´ˆ ë™ì•ˆ ì²œì²œíˆ í—ˆë²…ì§€ê°€ ë°”ë‹¥ê³¼ í‰í–‰ì´ ë  ë•Œê¹Œì§€ ì•‰ìŠµë‹ˆë‹¤.</li><li>(ë„·) ê°€ì¥ ë‚®ì€ ìì„¸ì—ì„œ 1ì´ˆê°„ ì™„ë²½í•˜ê²Œ ë©ˆì¶¥ë‹ˆë‹¤.</li><li>(ë‹¤ì„¯) 1ì´ˆ ë§Œì— í­ë°œì ìœ¼ë¡œ ì¼ì–´ë‚˜ ì‹œì‘ ìì„¸ë¡œ ëŒì•„ì˜µë‹ˆë‹¤. í—ˆë¦¬ê°€ ì•„ë‹Œ ì—‰ë©ì´ì™€ í—ˆë²…ì§€ í˜ì— ì§‘ì¤‘í•˜ì„¸ìš”.</li></ol>",
        },
        // --- [ìˆ˜ì •ë¨] í‘¸ì‹œì—… ê°•í™” í”„ë¡œê·¸ë¨ (ìš”ê°€ë§¤íŠ¸ ë²„ì „) ---
        {
          id: "main-pushup-1",
          name: "í‘¸ì‹œì—… ê°•í™”: í•¸ë“œ ë¦´ë¦¬ì¦ˆ í‘¸ì‹œì—…",
          type: "reps",
          count: "8~12íšŒ",
          description:
            "<ol><li>ë°”ë‹¥ì— ì™„ì „íˆ ì—ë“œë¦½ë‹ˆë‹¤.</li><li>ì–‘ì†ì„ ê°€ìŠ´ ì˜† ë°”ë‹¥ì—ì„œ 1~2cm ì •ë„ ì‚´ì§ ë–¼ì–´ ë“± ê·¼ìœ¡ì„ ì¡°ì—¬ì¤ë‹ˆë‹¤. (ë¦´ë¦¬ì¦ˆ ë™ì‘)</li><li>ë‹¤ì‹œ ì†ì„ ë°”ë‹¥ì— ì§šê³ , ëª¸ì„ í†µë‚˜ë¬´ì²˜ëŸ¼ ì¼ì§ì„ ìœ¼ë¡œ ìœ ì§€í•˜ë©° í•œ ë²ˆì— ë°€ì–´ ì˜¬ë¦½ë‹ˆë‹¤.</li><li>ì²œì²œíˆ ë²„í‹°ë©° ì‹œì‘ ìì„¸ë¡œ ëŒì•„ì˜µë‹ˆë‹¤. ë°”ë‹¥ì—ì„œ ë°€ì–´ì˜¬ë¦¬ëŠ” ìˆœìˆ˜í•œ í˜ì„ ê¸°ë¥´ëŠ” ë° ì§‘ì¤‘í•˜ì„¸ìš”.</li></ol>",
        },
        {
          id: "main-pushup-2",
          name: "í‘¸ì‹œì—… ê°•í™”: ë„¤ê±°í‹°ë¸Œ í‘¸ì‹œì—…",
          type: "reps",
          count: "5~8íšŒ",
          description:
            "<ol><li>ë°”ë‹¥ì—ì„œ ì •ìì„¸ í‘¸ì‹œì—… ì¤€ë¹„ ìì„¸ë¥¼ ì·¨í•©ë‹ˆë‹¤.</li><li>(í•˜ë‚˜, ë‘˜, ì…‹, ë„·, ë‹¤ì„¯) 5ì´ˆì— ê±¸ì³ ì•„ì£¼ ì²œì²œíˆ, ë²„í‹°ë©´ì„œ ê°€ìŠ´ì´ ë°”ë‹¥ì— ë‹¿ì„ ë•Œê¹Œì§€ ë‚´ë ¤ì˜µë‹ˆë‹¤.</li><li>ê°€ìŠ´ì´ ë°”ë‹¥ì— ì™„ì „íˆ ë‹¿ìœ¼ë©´, í˜ì„ ë¹¼ê³  í¸í•˜ê²Œ ì—ë“œë¦½ë‹ˆë‹¤.</li><li>ë°€ì–´ ì˜¬ë¦´ ë•ŒëŠ” í˜ì“°ì§€ ë§ê³ , ë¬´ë¦ì„ ë°”ë‹¥ì— ëŒ€ê³  í¸í•˜ê²Œ ì‹œì‘ ìì„¸ë¡œ ëŒì•„ì˜µë‹ˆë‹¤.</li><li>ë‚´ë ¤ì˜¤ëŠ” ë™ì‘ì˜ ìê·¹ì—ë§Œ ì§‘ì¤‘í•˜ë©° ë°˜ë³µí•©ë‹ˆë‹¤.</li></ol>",
        },
        {
          id: "main-pushup-3",
          name: "í‘¸ì‹œì—… ê°•í™”: ë‹¤ì´ì•„ëª¬ë“œ í‘¸ì‹œì—…",
          type: "reps",
          count: "ì‹¤íŒ¨ ì§€ì ê¹Œì§€",
          description:
            "<ol><li>ì–‘ì†ì„ ê°€ìŠ´ ë°”ë¡œ ì•„ë˜ì— ëª¨ìœ¼ê³ , ì—„ì§€ì™€ ê²€ì§€ë¥¼ ë§ëŒ€ì–´ ë‹¤ì´ì•„ëª¬ë“œ(â—‡) ëª¨ì–‘ì„ ë§Œë“­ë‹ˆë‹¤.</li><li>íŒ”ê¿ˆì¹˜ê°€ ëª¸í†µì„ ìŠ¤ì¹˜ë„ë¡ ì˜†êµ¬ë¦¬ì— ë¶™ì¸ ì±„ ì²œì²œíˆ ë‚´ë ¤ê°‘ë‹ˆë‹¤.</li><li>íŒ” ë’¤ìª½(ì‚¼ë‘ê·¼)ì˜ í˜ìœ¼ë¡œ ë°”ë‹¥ì„ ë°€ì–´ ì‹œì‘ ìì„¸ë¡œ ëŒì•„ì˜µë‹ˆë‹¤.</li><li>í˜ë“¤ ê²½ìš°, ë¬´ë¦ì„ ë°”ë‹¥ì— ëŒ€ê³  ìˆ˜í–‰í•˜ë©´ ë” ì‰¬ì›Œì§‘ë‹ˆë‹¤.</li></ol>",
        },
        {
          id: "main-3",
          name: "í”Œë­í¬",
          type: "time",
          count: 30,
          description:
            "<ol><li>íŒ”ê¿ˆì¹˜ë¥¼ ì–´ê¹¨ ë°”ë¡œ ì•„ë˜ì— ë‘ê³  ë°”ë‹¥ì— ëŒ‘ë‹ˆë‹¤.</li><li>ë¨¸ë¦¬ë¶€í„° ë°œëê¹Œì§€ ëª¸ì´ ì¼ì§ì„ ì´ ë˜ë„ë¡ í•©ë‹ˆë‹¤.</li><li>ì—‰ë©ì´ê°€ ì†Ÿê±°ë‚˜ ì²˜ì§€ì§€ ì•Šë„ë¡ ë³µë¶€ì™€ ì—‰ë©ì´ì— ê°•í•˜ê²Œ í˜ì„ ì£¼ê³  ë²„íŒë‹ˆë‹¤.</li><li>ìˆ¨ì„ ì°¸ì§€ ë§ê³  í¸ì•ˆí•˜ê²Œ í˜¸í¡í•©ë‹ˆë‹¤.</li></ol>",
        },
        {
          id: "main-back-1",
          name: "ìŠˆí¼ë§¨",
          type: "reps",
          count: "15íšŒ",
          description:
            "<ol><li>ë°”ë‹¥ì— ë°°ë¥¼ ëŒ€ê³  ì—ë“œë ¤ ì–‘íŒ”ì„ ì•ìœ¼ë¡œ ë»—ìŠµë‹ˆë‹¤.</li><li>ìˆ¨ì„ ë‚´ì‰¬ë©´ì„œ íŒ”ê³¼ ë‹¤ë¦¬ë¥¼ ë™ì‹œì— ë“¤ì–´ ì˜¬ë¦½ë‹ˆë‹¤.</li><li>í—ˆë¦¬ í˜ë³´ë‹¤ëŠ” ë“±ê³¼ ì—‰ë©ì´ ê·¼ìœ¡ì„ ì¡°ì´ëŠ” ëŠë‚Œì— ì§‘ì¤‘í•©ë‹ˆë‹¤.</li><li>ìµœê³  ì§€ì ì—ì„œ 1~2ì´ˆ ë©ˆì¶˜ í›„ ì²œì²œíˆ ë‚´ë ¤ì˜µë‹ˆë‹¤.</li></ol>",
        },
        {
          id: "main-back-2",
          name: "ë¸Œë¦¿ì§€",
          type: "reps",
          count: "15íšŒ",
          description:
            "<ol><li>ë°”ë‹¥ì— ëˆ„ì›Œ ë¬´ë¦ì„ ì„¸ì›ë‹ˆë‹¤.</li><li>ìˆ¨ì„ ë‚´ì‰¬ë©´ì„œ ì—‰ë©ì´ë¥¼ ë“¤ì–´ ì˜¬ë ¤ ì–´ê¹¨ë¶€í„° ë¬´ë¦ê¹Œì§€ ì¼ì§ì„ ì„ ë§Œë“­ë‹ˆë‹¤.</li><li>ìµœê³  ì§€ì ì—ì„œ ì—‰ë©ì´ë¥¼ ê°•í•˜ê²Œ ì¡°ì—¬ 1~2ì´ˆ ë©ˆì¶¥ë‹ˆë‹¤.</li><li>í—ˆë¦¬ê°€ ê³¼í•˜ê²Œ êº¾ì´ì§€ ì•Šë„ë¡ ì£¼ì˜í•˜ë©° ì²œì²œíˆ ë‚´ë ¤ì˜µë‹ˆë‹¤.</li></ol>",
        },
        {
          id: "main-4",
          name: "ë²„í”¼ í…ŒìŠ¤íŠ¸",
          type: "reps",
          count: "10íšŒ",
          description:
            "<ol><li>ì„œ ìˆëŠ” ìì„¸ì—ì„œ ë°”ë‹¥ì— ì†ì„ ì§šìŠµë‹ˆë‹¤.</li><li>ì í”„í•˜ì—¬ ë‹¤ë¦¬ë¥¼ ë’¤ë¡œ ë»—ì–´ í‘¸ì‹œì—… ìì„¸ë¥¼ ë§Œë“­ë‹ˆë‹¤.</li><li>í‘¸ì‹œì—…ì„ 1íšŒ ì‹¤ì‹œí•©ë‹ˆë‹¤. (ê°€ìŠ´ì´ ë°”ë‹¥ì— ë‹¿ë„ë¡)</li><li>ë‹¤ì‹œ ì í”„í•˜ì—¬ ë‹¤ë¦¬ë¥¼ ê°€ìŠ´ ìª½ìœ¼ë¡œ ë‹¹ê¹ë‹ˆë‹¤.</li><li>ì¼ì–´ë‚˜ë©´ì„œ ë¨¸ë¦¬ ìœ„ë¡œ ê°€ë³ê²Œ ì í”„í•©ë‹ˆë‹¤.</li></ol>",
        },
        {
          id: "main-5",
          name: "íŒ” ë²Œë ¤ ë›°ê¸°",
          type: "reps",
          count: "30íšŒ",
          description:
            "<ol><li>ì°¨ë · ìì„¸ì—ì„œ ì‹œì‘í•©ë‹ˆë‹¤.</li><li>ì í”„í•˜ë©° ì–‘íŒ”ì€ ë¨¸ë¦¬ ìœ„ë¡œ, ë‹¤ë¦¬ëŠ” ì–´ê¹¨ë„ˆë¹„ë³´ë‹¤ ë„“ê²Œ ë²Œë¦½ë‹ˆë‹¤.</li><li>ë‹¤ì‹œ ì í”„í•˜ë©° ì‹œì‘ ìì„¸ë¡œ ëŒì•„ì˜µë‹ˆë‹¤.</li></ol>",
        },
        {
          id: "rest",
          name: "ì„¸íŠ¸ ê°„ íœ´ì‹",
          type: "time",
          count: 120,
          description:
            "<ol><li>ê°€ë§Œíˆ ì„œ ìˆê¸°ë³´ë‹¤ ê°€ë³ê²Œ ê±¸ìœ¼ë©° í˜¸í¡ì„ ê³ ë¦…ë‹ˆë‹¤.</li><li>ë¬¼ì„ ë§ˆì…” ìˆ˜ë¶„ì„ ë³´ì¶©í•©ë‹ˆë‹¤.</li></ol>",
        },
        {
          id: "cooldown-1",
          name: "ë§ˆë¬´ë¦¬: ì´ìƒê·¼ ìŠ¤íŠ¸ë ˆì¹­",
          type: "time",
          count: 60,
          description:
            "<ol><li>ë°”ë‹¥ì— ëˆ„ì›Œ ë¬´ë¦ì„ ì„¸ì›ë‹ˆë‹¤.</li><li>ì˜¤ë¥¸ìª½ ë°œëª©ì„ ì™¼ìª½ ë¬´ë¦ ìœ„ì— ì˜¬ë ¤ ìˆ«ì 4 ëª¨ì–‘ì„ ë§Œë“­ë‹ˆë‹¤.</li><li>ì–‘ì†ìœ¼ë¡œ ì™¼ìª½ í—ˆë²…ì§€ ë’¤ë¥¼ ì¡ê³  ê°€ìŠ´ ìª½ìœ¼ë¡œ ë‹¹ê¹ë‹ˆë‹¤.</li><li>ì˜¤ë¥¸ìª½ ì—‰ë©ì´ ê¹Šì€ ê³³ì´ ëŠ˜ì–´ë‚˜ëŠ” ê²ƒì„ ëŠë¼ë©° 30ì´ˆ ìœ ì§€ í›„, ë°˜ëŒ€ìª½ë„ ë°˜ë³µí•©ë‹ˆë‹¤.</li></ol>",
        },
        {
          id: "cooldown-2",
          name: "ë§ˆë¬´ë¦¬: í–„ìŠ¤íŠ¸ë§ ìŠ¤íŠ¸ë ˆì¹­",
          type: "time",
          count: 60,
          description:
            "<ol><li>ë°”ë‹¥ì— ì•‰ì•„ ì˜¤ë¥¸ìª½ ë‹¤ë¦¬ë¥¼ ì•ìœ¼ë¡œ í…ë‹ˆë‹¤.</li><li>í—ˆë¦¬ë¥¼ í¸ ìƒíƒœë¡œ ìƒì²´ë¥¼ ì•ìœ¼ë¡œ ìˆ™ì—¬ ì˜¤ë¥¸ìª½ í—ˆë²…ì§€ ë’¤ìª½ì„ ëŠ˜ë¦½ë‹ˆë‹¤.</li><li>30ì´ˆ ìœ ì§€ í›„, ë°˜ëŒ€ìª½ë„ ë°˜ë³µí•©ë‹ˆë‹¤.</li></ol>",
        },
        {
          id: "cooldown-3",
          name: "ë§ˆë¬´ë¦¬: ê°€ìŠ´/ì–´ê¹¨ ìŠ¤íŠ¸ë ˆì¹­",
          type: "time",
          count: 30,
          description:
            "<ol><li>ë“± ë’¤ë¡œ ê¹ì§€ë¥¼ ë¼ê³ , ê°€ìŠ´ì„ í™œì§ ì—´ì–´ì¤ë‹ˆë‹¤.</li><li>ê¹ì§€ ë‚€ ì†ì„ ìœ„ë¡œ ë“¤ì–´ ì˜¬ë¦¬ë©° ì–´ê¹¨ ì•ìª½ê³¼ ê°€ìŠ´ì„ ëŠ˜ë¦½ë‹ˆë‹¤.</li></ol>",
        },
        {
          id: "cooldown-4",
          name: "ë§ˆë¬´ë¦¬: ì•„ê¸° ìì„¸",
          type: "time",
          count: 60,
          description:
            "<ol><li>ë¬´ë¦ì„ ê¿‡ê³  ì•‰ì•„ ìƒì²´ë¥¼ ìˆ™ì—¬ ì´ë§ˆë¥¼ ë°”ë‹¥ì— ëŒ‘ë‹ˆë‹¤.</li><li>ì˜¨ëª¸ì˜ ê¸´ì¥ì„ í’€ê³  ë“±ê³¼ í—ˆë¦¬ë¥¼ ì´ì™„ì‹œí‚¤ë©° ê¹Šê²Œ í˜¸í¡í•©ë‹ˆë‹¤.</li></ol>",
        },
      ];

      // --- DOM ìš”ì†Œ ê°€ì ¸ì˜¤ê¸° ---
      const controlPanel = document.getElementById("control-panel");
      const currentExerciseTitle = document.getElementById(
        "current-exercise-title"
      );
      const currentSetInfo = document.getElementById("current-set-info");
      const timerContainer = document.getElementById("timer-container");
      const timerDisplay = document.getElementById("timer-display");
      const startBtn = document.getElementById("start-btn");
      const nextBtn = document.getElementById("next-btn");
      const routineList = document.getElementById("routine-list");
      const completionMessage = document.getElementById("completion-message");
      const modal = document.getElementById("exercise-modal");
      const modalTitle = document.getElementById("modal-title");
      const modalDescription = document.getElementById("modal-description");
      const modalCloseBtn = document.getElementById("modal-close-btn");

      // --- ìƒíƒœ ë³€ìˆ˜ ---
      let currentSet = 1;
      const totalSets = 3;
      let currentExerciseIndex = 0;
      let workoutInProgress = false;
      let timerInterval;

      // --- Modal í•¨ìˆ˜ ---
      function openModal(exercise) {
        modalTitle.textContent = exercise.name;
        modalDescription.innerHTML = exercise.description; // ìƒì„¸ ì„¤ëª…(HTML)ì„ ê·¸ëŒ€ë¡œ ì‚½ì…
        modal.classList.remove("opacity-0", "pointer-events-none");
        modal.querySelector("div").classList.remove("scale-95");
      }

      function closeModal() {
        modal.classList.add("opacity-0", "pointer-events-none");
        modal.querySelector("div").classList.add("scale-95");
      }

      // ìš´ë™ ëª©ë¡ ë Œë”ë§ í•¨ìˆ˜
      function renderRoutine() {
        routineList.innerHTML = "";
        let sectionTitle = "";

        routine.forEach((exercise, index) => {
          let currentSection = "";
          if (exercise.id.startsWith("warmup")) currentSection = "ì¤€ë¹„ìš´ë™";
          else if (exercise.id.startsWith("main")) currentSection = "ë³¸ìš´ë™";
          else if (exercise.id.startsWith("rest")) currentSection = "íœ´ì‹";
          else currentSection = "ë§ˆë¬´ë¦¬ ìš´ë™";

          if (sectionTitle !== currentSection) {
            sectionTitle = currentSection;
            const titleEl = document.createElement("h3");
            titleEl.className =
              "text-2xl font-bold text-slate-700 border-b-2 border-slate-200 pb-2";
            titleEl.textContent = sectionTitle;
            routineList.appendChild(titleEl);
          }

          const div = document.createElement("div");
          div.id = exercise.id;
          div.className =
            "workout-card bg-white p-5 rounded-xl border-2 border-transparent shadow-sm hover:shadow-lg hover:border-blue-500";

          const briefDescription = exercise.description.includes("<li>")
            ? exercise.description.split("<li>")[1].split("</li>")[0]
            : exercise.description;

          div.innerHTML = `
                    <div class="flex justify-between items-center">
                        <h4 class="text-xl font-semibold">${exercise.name}</h4>
                        <span class="text-lg font-bold text-blue-500">${
                          exercise.type === "reps"
                            ? exercise.count
                            : `${exercise.count}ì´ˆ`
                        }</span>
                    </div>
                    <p class="text-slate-600 mt-2 truncate">${briefDescription}</p>
                `;

          div.addEventListener("click", () => {
            if (workoutInProgress) {
              if (index === currentExerciseIndex) {
                openModal(exercise);
              } else {
                clearInterval(timerInterval);
                currentExerciseIndex = index;
                updateDisplay();
              }
            } else {
              openModal(exercise);
            }
          });
          routineList.appendChild(div);
        });
      }

      function updateDisplay() {
        document
          .querySelectorAll(".workout-card")
          .forEach((card) => card.classList.remove("active"));

        if (currentExerciseIndex >= routine.length) {
          workoutInProgress = false;
          completionMessage.classList.remove("hidden");
          currentExerciseTitle.textContent = "ìš´ë™ ì™„ë£Œ!";
          nextBtn.classList.add("hidden");
          startBtn.textContent = "ë‹¤ì‹œ ì‹œì‘";
          startBtn.classList.remove("hidden");
          return;
        }

        const exercise = routine[currentExerciseIndex];
        const currentCard = document.getElementById(exercise.id);
        if (currentCard) {
          currentCard.classList.add("active");
          currentCard.scrollIntoView({ behavior: "smooth", block: "center" });
        }
        currentExerciseTitle.textContent = exercise.name;

        if (exercise.type === "time") {
          timerContainer.classList.remove("hidden");
          startTimer(exercise.count);
        } else {
          timerContainer.classList.add("hidden");
          clearInterval(timerInterval);
        }
      }

      function startTimer(duration) {
        let timeLeft = duration;
        clearInterval(timerInterval);
        function update() {
          const minutes = Math.floor(timeLeft / 60)
            .toString()
            .padStart(2, "0");
          const seconds = (timeLeft % 60).toString().padStart(2, "0");
          timerDisplay.textContent = `${minutes}:${seconds}`;

          if (timeLeft <= 0) {
            clearInterval(timerInterval);
            nextBtn.click();
          } else {
            timeLeft--;
          }
        }
        update();
        timerInterval = setInterval(update, 1000);
      }

      function nextExercise() {
        const lastExercise = routine[currentExerciseIndex];
        currentExerciseIndex++;

        if (lastExercise.id === "main-5") {
          if (currentSet < totalSets) {
            currentExerciseIndex = routine.findIndex((ex) => ex.id === "rest");
          } else {
            currentExerciseIndex = routine.findIndex(
              (ex) => ex.id === "cooldown-1"
            );
          }
        } else if (lastExercise.id === "rest") {
          currentSet++;
          if (currentSet <= totalSets) {
            currentSetInfo.textContent = `ì´ ${totalSets}ì„¸íŠ¸ ì¤‘ ${currentSet}ì„¸íŠ¸ ì§„í–‰`;
            currentExerciseIndex = routine.findIndex(
              (ex) => ex.id === "main-1"
            );
          }
        }
        updateDisplay();
      }

      // --- Event Listeners ---
      startBtn.addEventListener("click", () => {
        if (!workoutInProgress) {
          workoutInProgress = true;
          currentSet = 1;
          currentExerciseIndex = 0;
          startBtn.classList.add("hidden");
          nextBtn.classList.remove("hidden");
          completionMessage.classList.add("hidden");
          currentSetInfo.textContent = `ì´ ${totalSets}ì„¸íŠ¸ ì¤‘ ${currentSet}ì„¸íŠ¸ ì§„í–‰`;
          updateDisplay();
        }
      });

      nextBtn.addEventListener("click", () => {
        clearInterval(timerInterval);
        nextExercise();
      });

      modalCloseBtn.addEventListener("click", closeModal);
      modal.addEventListener("click", (e) => {
        if (e.target === modal) {
          closeModal();
        }
      });

      window.onload = () => {
        renderRoutine();
      };
    </script>
  </body>
</html>
